<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>initComputed</title>
  </head>
  <body>
    <div id="app">
      <h2>{{a.b}}</h2>
      <button @click="changeA">change</button>
    </div>
    <!-- with(this){return _c('div',{attrs:{"id":"app"}},[_c('h2',[_v(_s(a.b))]),_v(" "),_c('button',{on:{"click":changeA}},[_v("change")])])} -->
  </body>
</html>
<script src="../dist/vue.js"></script>
<script>
  let vm = new Vue({
    el: "#app",
    // computed: {
    //   c: function () {
    //     return this.a + this.b;
    //   },
    // },
    // watch: {
    //   a: {
    //     handler: function (val, oldVal) {
    //       console.log(val);
    //     },
    //   },
    // },
    // {a:1,b:1} => 5个dep实例，0:$attrs、1:$listeners、2:{a:1,b:1}、3:a、4:b
    // {a:{b:1}} => 6个dep实例，0:$attrs、1:$listeners、2:{a:{b:1}}、3:a、4:{b:1}、5:b
    data() {
      return {
        a: {
          b: 1,
        },
      };
    },
    methods: {
      changeA() {
        this.a++;
      },
    },
  });
  setTimeout(() => {
    vm.$set(vm.a, "c", 1);
  }, 1000);
</script>
